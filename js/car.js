var mtlLoader = new THREE.MTLLoader();
mtlLoader.setPath('obj/');
let models = ['chuzu02', 'BORA', 'car_passat', 'chuzu01', 'car_kdlk03', 'chuzu04', 'kdlk01', 'chuzu03'];
models.forEach(function (name, index) {
    mtlLoader.load(name + '.mtl', function (materials) {
        materials.preload();
        var objLoader = new THREE.OBJLoader();
        objLoader.setMaterials(materials);
        objLoader.setPath('obj/');
        objLoader.load(name + '.obj', function (object) {
            object.traverse(function (child) {
                if (child instanceof THREE.Mesh) {
                    child.scale.set(0.3, 0.3, 0.3);
                    child.rotation.set(Math.PI * 3 / 2, 0, 0);
                }
            });
            new ThreeCar().addCar(object, testTrace[index]);
        });
    });
});

var ThreeCar = function () {
    ThreeCar.prototype.addCar = function (object, coords) {
        if (!coords || coords.length == 0) return;
        this._prepareData(coords);
        var v = threeLayer.coordinateToVector3(new maptalks.Coordinate(coords[0]));
        object.position.x = v.x;
        object.position.y = v.y;
        object.position.z = v.z;
        var scene = threeLayer.getScene();
        scene.add(object);
        var that = this;
        addToAnimationLoop(function () {
            var t = Date.now();
            var pa = that._getPositionAndAngle(t);
            object.position.x = pa.x;
            object.position.y = pa.y;
            object.position.z = pa.z;
            object.rotation.z = pa.angle;
        })
    }

    ThreeCar.prototype._prepareData = function (coords) {
        if (!coords) {
            return;
        }
        var data = [];
        var dataToDraw = [];
        var p1 = void 0,
            p2 = void 0,
            dis = 0,
            speed = 10;
        for (var i = 0, l = coords.length; i < l - 1; i++) {
            p1 = threeLayer.coordinateToVector3(new maptalks.Coordinate(coords[i]));
            p2 = threeLayer.coordinateToVector3(new maptalks.Coordinate(coords[i + 1]));
            dis += p1.distanceTo(p2) * speed;
            dataToDraw.push(dis);
            if (i == 0) {
                data.push(p1);
            }
            data.push(p2);
        }
        this._durations = dis;
        this._dataToDraw = dataToDraw;
        this._data = data;
    }

    ThreeCar.prototype._getPositionAndAngle = function (t) {
        if (!this._durations || !this._data || !this._dataToDraw) {
            return;
        }
        if (!this._startAnimaTime) {
            this._startAnimaTime = Date.now();
        }
        var eclapse = (t - this._startAnimaTime) % this._durations;
        var pos = {};
        for (var i = 0; i < this._dataToDraw.length; i++) {
            if (this._dataToDraw[i] > eclapse) {
                if (i == 0) {
                    pos.x = this._data[0].x + (this._data[1].x - this._data[0].x) * eclapse / this._dataToDraw[0];
                    pos.y = this._data[0].y + (this._data[1].y - this._data[0].y) * eclapse / this._dataToDraw[0];
                    pos.angle = Math.atan((this._data[1].y - this._data[0].y) / (this._data[1].x - this._data[0].x));
                } else {
                    var tmp1 = eclapse - this._dataToDraw[i - 1];
                    var tmp2 = this._dataToDraw[i] - this._dataToDraw[i - 1];
                    pos.x = this._data[i].x + (this._data[i + 1].x - this._data[i].x) * tmp1 / tmp2;
                    pos.y = this._data[i].y + (this._data[i + 1].y - this._data[i].y) * tmp1 / tmp2;
                    pos.angle = Math.atan((this._data[i + 1].y - this._data[i].y) / (this._data[i + 1].x - this._data[i].x));
                }
                break;
            }
        }
        if (this._data[i + 1].x - this._data[i].x < 0) {
            pos.angle += Math.PI;
        }
        pos.z = this._data[i].z;
        return pos;
    }
}

var testTrace = [
    [
        [-74.0066, 40.70768, 10],
        [-74.00638, 40.70752, 21.829],
        [-74.00595, 40.7072, 45.211],
        [-74.00618, 40.7071, 53.564],
        [-74.00645, 40.70698, 63.424],
        [-74.0058, 40.70646, 94.523],
        [-74.00569, 40.70637, 99.85],
        [-74.005, 40.70685, 117.179],
        [-74.00406, 40.70745, 139.918],
        [-74.00344, 40.70807, 168.013],
        [-74.00258, 40.70878, 202.820],
        [-74.00161, 40.70952, 240.492],
        [-74.00124, 40.71, 260.567],
        [-74.00121, 40.71005, 262.551],
        [-74.00022, 40.70926, 277.696],
        [-74.00019, 40.70922, 278.335],
        [-73.99988, 40.70861, 286.358],
        [-73.99984, 40.70844, 288.477],
        [-73.99984, 40.70832, 289.950],
        [-73.9999, 40.70814, 292.228],
        [-74.00015, 40.70788, 296.177],
        [-74.00035, 40.70774, 298.709],
        [-74.00116, 40.70729, 308.052],
        [-74.00161, 40.707, 313.547],
        [-74.00318, 40.7061, 323.785],
        [-74.00703, 40.70364, 349.975],
        [-74.0084, 40.70281, 359.098],
        [-74.00903, 40.70242, 363.329],
        [-74.00945, 40.70217, 366.521],
        [-74.00973, 40.70204, 368.484],
        [-74.01003, 40.70195, 370.414],
        [-74.01196, 40.70151, 382.464],
        [-74.01281, 40.70133, 387.740],
        [-74.01348, 40.70125, 391.796],
        [-74.0138, 40.70124, 393.711],
        [-74.01436, 40.70133, 397.134],
        [-74.01469, 40.70143, 399.258],
        [-74.01497, 40.70156, 401.222],
        [-74.01524, 40.70173, 403.320],
        [-74.0154, 40.70191, 405.032],
        [-74.01549, 40.70206, 406.332],
        [-74.01647, 40.70406, 423.158],
        [-74.01657, 40.70435, 425.522],
        [-74.01662, 40.70463, 427.751],
        [-74.01663, 40.70478, 428.935],
        [-74.0166, 40.70501, 430.758],
        [-74.01658, 40.70508, 431.323],
        [-74.01623, 40.70597, 442.862],
        [-74.0161, 40.70636, 447.860],
        [-74.01601, 40.70656, 450.485],
        [-74.01595, 40.70667, 451.964],
        [-74.01588, 40.70684, 458.506],
        [-74.0158, 40.70705, 466.535],
        [-74.01565, 40.7071, 468.812],
        [-74.01551, 40.7071, 470.758],
        [-74.01538, 40.70708, 472.602],
        [-74.01522, 40.707, 475.267],
        [-74.01507, 40.70682, 479.171],
        [-74.01499, 40.70662, 483.003],
        [-74.01498, 40.70634, 488.139],
        [-74.015, 40.70616, 491.452],
        [-74.01511, 40.70573, 499.484],
        [-74.01524, 40.70535, 506.682],
        [-74.01526, 40.70529, 507.817],
        [-74.01555, 40.70451, 513.677],
        [-74.01564, 40.704, 517.398],
        [-74.01568, 40.7035, 521.020],
        [-74.01566, 40.7026, 527.529],
        [-74.01552, 40.70153, 535.304],
        [-74.01547, 40.70125, 537.347],
        [-74.0153, 40.70067, 541.644],
        [-74.0117, 40.69087, 615.206],
        [-74.01144, 40.69036, 619.159],
        [-74.01114, 40.6899, 622.870],
        [-74.00658, 40.68349, 675.535],
        [-74.00636, 40.68312, 678.470],
        [-74.006, 40.68224, 685.133],
        [-74.00581, 40.68188, 687.937],
        [-74.00575, 40.68178, 688.731],
        [-74.00552, 40.68139, 692.374],
        [-74.00534, 40.68095, 703.839],
        [-74.00496, 40.68046, 717.987],
        [-74.00469, 40.6802, 726.224],
        [-74.00446, 40.6801, 731.228],
        [-74.00303, 40.67853, 744.178],
        [-74.00275, 40.67819, 746.898],
        [-74.00216, 40.67738, 753.179],
        [-74.00159, 40.67651, 759.772],
        [-74.00083, 40.6753, 768.868],
        [-73.99657, 40.66832, 816.221],
        [-73.99639, 40.66795, 818.65],
        [-73.99621, 40.66761, 821.864],
        [-73.99616, 40.66746, 823.221],
        [-73.99609, 40.6673, 824.700],
        [-73.99599, 40.66717, 826.020],
        [-73.99586, 40.66705, 827.383],
        [-73.99572, 40.66694, 828.724],
        [-73.9945, 40.6662, 839.118],
        [-73.9942, 40.66601, 841.719],
        [-73.99097, 40.6641, 863.403],
        [-73.99025, 40.66366, 868.298],
        [-73.9898, 40.66335, 871.517],
        [-73.98956, 40.66315, 873.405],
        [-73.98909, 40.66272, 877.303],
        [-73.98894, 40.66256, 878.674],
        [-73.98858, 40.66211, 882.348],
        [-73.98718, 40.66013, 898.031],
        [-73.98686, 40.65978, 901.004],
        [-73.98645, 40.65941, 904.378],
        [-73.98609, 40.65913, 907.108],
        [-73.9856, 40.65882, 910.486],
        [-73.9806, 40.65581, 944.285],
        [-73.97912, 40.6549, 954.373],
        [-73.97863, 40.65453, 958.034],
        [-73.97822, 40.65415, 961.462],
        [-73.97778, 40.65363, 965.775],
        [-73.97747, 40.65316, 969.443],
        [-73.97731, 40.65287, 971.637],
        [-73.97707, 40.65246, 983.425],
        [-73.97565, 40.64985, 1057.620],
        [-73.97548, 40.6495, 1067.421],
        [-73.97529, 40.64895, 1082.362],
        [-73.97515, 40.64842, 1096.565],
        [-73.97489, 40.64705, 1132.935],
        [-73.97473, 40.64608, 1158.622],
        [-73.97476, 40.64595, 1164.015],
        [-73.97472, 40.64538, 1187.336],
        [-73.97473, 40.64518, 1195.513],
        [-73.97465, 40.64481, 1210.833],
        [-73.97436, 40.64327, 1237.545],
        [-73.97426, 40.64328, 1238.891],
        [-73.97409, 40.6433, 1241.187],
        [-73.97374, 40.64148, 1288.362],
        [-73.97364, 40.64091, 1303.111],
        [-73.97335, 40.64094, 1307.699],
        [-73.97226, 40.64106, 1324.966],
        [-73.97181, 40.63867, 1391.747],
        [-73.97136, 40.63628, 1458.527],
        [-73.96935, 40.6365, 1524.467],
        [-73.96803, 40.63665, 1567.804],
        [-73.96776, 40.63567, 1591.244],
        [-73.96763, 40.63523, 1601.802],
        [-73.96716, 40.63543, 1615.757],
        [-73.96096, 40.63836, 1804.918]
    ],
    [
        [-74.00625, 40.70845, 661],
        [-74.00653, 40.70822, 670.571],
        [-74.00602, 40.7079, 689.185],
        [-74.00548, 40.70738, 713.730],
        [-74.005, 40.70685, 737.574],
        [-74.00406, 40.70745, 757.914],
        [-74.00344, 40.70807, 771.807],
        [-74.0028, 40.7086, 784.639],
        [-74.00165, 40.70949, 806.886],
        [-74.00157, 40.70956, 808.540],
        [-74.00154, 40.7096, 809.362],
        [-74.00137, 40.70964, 810.593],
        [-74.00116, 40.70966, 812.056],
        [-74.00103, 40.70964, 812.973],
        [-74.0009, 40.70958, 814.025],
        [-74.00046, 40.70922, 818.501],
        [-74.00035, 40.70909, 819.910],
        [-74.00028, 40.70896, 821.190],
        [-74.00015, 40.70852, 825.303],
        [-74.00003, 40.70833, 827.224],
        [-73.99981, 40.70819, 829.210],
        [-73.9997, 40.70814, 830.097],
        [-73.99944, 40.7081, 831.931],
        [-73.99915, 40.70813, 833.955],
        [-73.99905, 40.70816, 834.698],
        [-73.99847, 40.70843, 839.404],
        [-73.99809, 40.70857, 842.325],
        [-73.99736, 40.70877, 847.691],
        [-73.99678, 40.70888, 851.825],
        [-73.99531, 40.70909, 862.167],
        [-73.99398, 40.70931, 871.578],
        [-73.99329, 40.7094, 875.368],
        [-73.98939, 40.70997, 896.868],
        [-73.98524, 40.71045, 919.592],
        [-73.98352, 40.7106, 928.963],
        [-73.98052, 40.71082, 945.278],
        [-73.98014, 40.71086, 947.355],
        [-73.97976, 40.71095, 949.510],
        [-73.97931, 40.71108, 952.116],
        [-73.9787, 40.71137, 956.014],
        [-73.97852, 40.7115, 957.360],
        [-73.97821, 40.71174, 959.758],
        [-73.9779, 40.71208, 962.710],
        [-73.97772, 40.71231, 964.619],
        [-73.97614, 40.71531, 987.686],
        [-73.97553, 40.71658, 997.337],
        [-73.9752, 40.71736, 1003.187],
        [-73.97503, 40.71801, 1007.919],
        [-73.97496, 40.71834, 1010.305],
        [-73.97485, 40.71905, 1015.410],
        [-73.97458, 40.72127, 1031.330],
        [-73.97444, 40.72204, 1036.881],
        [-73.97433, 40.72236, 1039.242],
        [-73.97408, 40.72284, 1042.927],
        [-73.97242, 40.7255, 1063.940],
        [-73.97226, 40.72579, 1066.184],
        [-73.97198, 40.72641, 1070.864],
        [-73.97187, 40.7268, 1073.712],
        [-73.97166, 40.72829, 1084.412],
        [-73.97166, 40.72863, 1086.840],
        [-73.9717, 40.72893, 1088.993],
        [-73.97178, 40.72916, 1090.692],
        [-73.9719, 40.72942, 1092.659],
        [-73.97206, 40.72969, 1094.772],
        [-73.97228, 40.72994, 1096.918],
        [-73.9725, 40.73015, 1098.833],
        [-73.97324, 40.73077, 1104.802],
        [-73.97354, 40.73111, 1107.723],
        [-73.97368, 40.73131, 1109.340],
        [-73.97379, 40.73151, 1110.887],
        [-73.97387, 40.7317, 1112.311],
        [-73.97394, 40.73193, 1113.997],
        [-73.97478, 40.73518, 1137.646],
        [-73.97487, 40.73554, 1140.262],
        [-73.97491, 40.73586, 1142.557],
        [-73.97489, 40.73625, 1145.344],
        [-73.97478, 40.73664, 1148.192],
        [-73.97454, 40.73713, 1151.925],
        [-73.97436, 40.73741, 1154.149],
        [-73.97335, 40.73877, 1165.292],
        [-73.97321, 40.73902, 1167.232],
        [-73.97305, 40.73942, 1170.216],
        [-73.97278, 40.7403, 1176.668],
        [-73.97226, 40.74249, 1192.558],
        [-73.97213, 40.74284, 1195.154],
        [-73.9719, 40.7433, 1198.667],
        [-73.97107, 40.74459, 1208.915],
        [-73.97068, 40.74513, 1213.310],
        [-73.9705, 40.74535, 1215.159],
        [-73.97018, 40.7457, 1218.199],
        [-73.96978, 40.74608, 1221.670],
        [-73.9692, 40.7466, 1226.531],
        [-73.9689, 40.74692, 1229.334],
        [-73.96593, 40.75048, 1259.408],
        [-73.96499, 40.75156, 1268.646],
        [-73.96358, 40.75306, 1281.795],
        [-73.96302, 40.75378, 1287.763],
        [-73.96204, 40.75489, 1297.299],
        [-73.96176, 40.75515, 1299.695],
        [-73.96155, 40.7553, 1301.256],
        [-73.9611, 40.75568, 1304.901],
        [-73.96063, 40.75613, 1308.999],
        [-73.9604, 40.75638, 1311.175],
        [-73.9591, 40.75803, 1324.896],
        [-73.95838, 40.75902, 1332.968],
        [-73.95798, 40.75952, 1337.142],
        [-73.95786, 40.75964, 1338.217],
        [-73.95744, 40.75997, 1341.491],
        [-73.95654, 40.7606, 1348.119],
        [-73.95601, 40.76101, 1352.217],
        [-73.95437, 40.76248, 1365.960],
        [-73.95405, 40.76282, 1368.942],
        [-73.95085, 40.76639, 1399.755],
        [-73.95043, 40.76696, 1404.416],
        [-73.94959, 40.76791, 1412.580],
        [-73.94917, 40.76848, 1417.242],
        [-73.9489, 40.7688, 1419.954],
        [-73.94824, 40.76952, 1426.213],
        [-73.94791, 40.76987, 1429.284],
        [-73.94759, 40.77018, 1432.094],
        [-73.94657, 40.77127, 1441.634],
        [-73.94582, 40.77188, 1447.586],
        [-73.94562, 40.77201, 1449.011],
        [-73.94506, 40.77246, 1453.427],
        [-73.94467, 40.77282, 1456.752],
        [-73.94332, 40.7743, 1469.597],
        [-73.94287, 40.77486, 1474.278],
        [-73.94269, 40.77517, 1476.696],
        [-73.94261, 40.77535, 1478.052],
        [-73.94248, 40.77576, 1481.063],
        [-73.94245, 40.77592, 1482.217],
        [-73.94243, 40.77616, 1483.935],
        [-73.94249, 40.77678, 1488.374],
        [-73.94266, 40.77738, 1492.756],
        [-73.94294, 40.77819, 1498.735],
        [-73.94366, 40.77976, 1510.603],
        [-73.94376, 40.78002, 1512.537],
        [-73.94401, 40.78091, 1519.035],
        [-73.94412, 40.7815, 1523.289],
        [-73.94413, 40.78193, 1526.361],
        [-73.94405, 40.78237, 1529.532],
        [-73.94397, 40.78258, 1531.093],
        [-73.94378, 40.78295, 1533.928],
        [-73.9435, 40.78333, 1537.035],
        [-73.94336, 40.78347, 1538.289],
        [-73.94321, 40.78361, 1539.577],
        [-73.94286, 40.78387, 1542.228],
        [-73.94209, 40.78429, 1547.359],
        [-73.9404, 40.78514, 1558.329],
        [-73.94011, 40.78532, 1560.356],
        [-73.93973, 40.78565, 1563.483],
        [-73.93833, 40.78723, 1577.069],
        [-73.93813, 40.78752, 1579.406],
        [-73.9379, 40.78798, 1582.918],
        [-73.93726, 40.78942, 1593.767],
        [-73.93706, 40.78975, 1596.360],
        [-73.93616, 40.79092, 1606.029],
        [-73.9359, 40.79121, 1608.532],
        [-73.9356, 40.79149, 1611.106],
        [-73.9351, 40.79187, 1614.936],
        [-73.9338, 40.79275, 1624.364],
        [-73.93306, 40.7932, 1629.496],
        [-73.93059, 40.79455, 1645.965],
        [-73.93025, 40.7948, 1648.527],
        [-73.92997, 40.7951, 1651.151],
        [-73.92964, 40.79557, 1654.951],
        [-73.92947, 40.7959, 1657.481],
        [-73.9293, 40.79643, 1661.376],
        [-73.92917, 40.79715, 1666.565],
        [-73.92914, 40.79741, 1668.429],
        [-73.92907, 40.7988, 1678.366],
        [-73.92909, 40.79913, 1680.726],
        [-73.92912, 40.7993, 1681.951],
        [-73.92924, 40.79962, 1684.328],
        [-73.92954, 40.80025, 1689.112],
        [-73.92972, 40.80066, 1692.198],
        [-73.93002, 40.80166, 1699.524],
        [-73.93022, 40.80271, 1707.103],
        [-73.9303, 40.80292, 1708.665],
        [-73.9305, 40.80334, 1711.854],
        [-73.93066, 40.8036, 1713.903],
        [-73.93145, 40.80467, 1722.660],
        [-73.93355, 40.80697, 1742.633],
        [-73.93393, 40.80744, 1746.570],
        [-73.93419, 40.80785, 1749.819],
        [-73.93435, 40.80812, 1751.933],
        [-73.93454, 40.80853, 1755.037],
        [-73.93482, 40.80923, 1760.262],
        [-73.93491, 40.8096, 1762.950],
        [-73.93487, 40.80993, 1769.984],
        [-73.93461, 40.81117, 1796.634],
        [-73.93462, 40.81131, 1799.610],
        [-73.93473, 40.81149, 1803.820]
    ],
    [
        [-74.00156, 40.70796, 580],
        [-74.00241, 40.70876, 670.932],
        [-74.0025, 40.70884, 680.240],
        [-74.00165, 40.70949, 714.304],
        [-74.00157, 40.70956, 717.751],
        [-74.00154, 40.7096, 719.464],
        [-74.00137, 40.70964, 721.705],
        [-74.00116, 40.70966, 724.370],
        [-74.00103, 40.70964, 726.041],
        [-74.0009, 40.70958, 727.957],
        [-74.00046, 40.70922, 736.109],
        [-74.00035, 40.70909, 738.675],
        [-74.00028, 40.70896, 741.007],
        [-74.00015, 40.70852, 748.497],
        [-74.00003, 40.70833, 751.996],
        [-73.99981, 40.70819, 755.613],
        [-73.9997, 40.70814, 757.228],
        [-73.99944, 40.7081, 760.569],
        [-73.99915, 40.70813, 764.255],
        [-73.99905, 40.70816, 765.609],
        [-73.99847, 40.70843, 774.179],
        [-73.99809, 40.70857, 779.499],
        [-73.99736, 40.70877, 789.273],
        [-73.99678, 40.70888, 796.802],
        [-73.99531, 40.70909, 815.638],
        [-73.99398, 40.70931, 832.779],
        [-73.99329, 40.7094, 838.654],
        [-73.98939, 40.70997, 871.980],
        [-73.98524, 40.71045, 907.204],
        [-73.98352, 40.7106, 921.731],
        [-73.98052, 40.71082, 947.020],
        [-73.98014, 40.71086, 950.239],
        [-73.97976, 40.71095, 953.579],
        [-73.97931, 40.71108, 957.620],
        [-73.9787, 40.71137, 963.661],
        [-73.97852, 40.7115, 965.747],
        [-73.97821, 40.71174, 969.465],
        [-73.9779, 40.71208, 974.040],
        [-73.97772, 40.71231, 977.000],
        [-73.97614, 40.71531, 1012.756],
        [-73.97553, 40.71658, 1027.716],
        [-73.9752, 40.71736, 1036.783],
        [-73.97503, 40.71801, 1044.118],
        [-73.97496, 40.71834, 1047.818],
        [-73.97485, 40.71905, 1055.731],
        [-73.97458, 40.72127, 1080.408],
        [-73.97444, 40.72204, 1089.012],
        [-73.97433, 40.72236, 1092.672],
        [-73.97408, 40.72284, 1098.385],
        [-73.97242, 40.7255, 1130.955],
        [-73.97226, 40.72579, 1134.435],
        [-73.97211, 40.7261, 1138.090],
        [-73.97198, 40.72641, 1141.690],
        [-73.97187, 40.7268, 1146.105],
        [-73.9717, 40.72796, 1159.024],
        [-73.97166, 40.72829, 1162.692],
        [-73.97166, 40.72863, 1166.455],
        [-73.9717, 40.72893, 1169.793],
        [-73.97178, 40.72916, 1172.426],
        [-73.9719, 40.72942, 1175.475],
        [-73.97206, 40.72969, 1178.751],
        [-73.97228, 40.72994, 1182.077],
        [-73.9725, 40.73015, 1185.045],
        [-73.97324, 40.73077, 1194.299],
        [-73.97341, 40.73095, 1196.749],
        [-73.97368, 40.73131, 1201.332],
        [-73.97387, 40.7317, 1205.934],
        [-73.97478, 40.73518, 1245.203],
        [-73.97487, 40.73554, 1249.259],
        [-73.97491, 40.73586, 1252.817],
        [-73.97489, 40.73625, 1257.137],
        [-73.97478, 40.73664, 1261.552],
        [-73.97454, 40.73713, 1267.337],
        [-73.97436, 40.73741, 1270.785],
        [-73.97391, 40.73784, 1277.322],
        [-73.97349, 40.73843, 1291.152],
        [-73.97331, 40.73863, 1296.146],
        [-73.97309, 40.73897, 1303.958],
        [-73.97292, 40.73938, 1312.824],
        [-73.9727, 40.74004, 1326.868],
        [-73.97256, 40.74073, 1341.270],
        [-73.97239, 40.74144, 1356.157],
        [-73.97244, 40.74191, 1365.884],
        [-73.97238, 40.74236, 1375.215],
        [-73.97224, 40.74276, 1383.753],
        [-73.97207, 40.74318, 1392.816],
        [-73.97336, 40.74372, 1459.259],
        [-73.97351, 40.74378, 1466.906],
        [-73.97226, 40.74548, 1517.777],
        [-73.97211, 40.74567, 1523.564],
        [-73.97291, 40.74601, 1549.773],
        [-73.97364, 40.74632, 1573.684],
        [-73.97374, 40.74616, 1576.499],
        [-73.97375, 40.74601, 1578.888],
        [-73.97374, 40.74595, 1579.849],
        [-73.97355, 40.74578, 1583.392],
        [-73.97346, 40.74573, 1584.736],
        [-73.97326, 40.74565, 1587.461],
        [-73.97307, 40.74562, 1589.800],
        [-73.97293, 40.74561, 1591.494],
        [-73.97274, 40.74562, 1593.789],
        [-73.9726, 40.74562, 1595.475],
        [-73.97245, 40.74566, 1599.834],
        [-73.97219, 40.74571, 1602.919],
        [-73.9719, 40.74589, 1607.232],
        [-73.97169, 40.74607, 1610.879],
        [-73.97097, 40.74702, 1627.512],
        [-73.97073, 40.7473, 1632.581],
        [-73.97039, 40.74757, 1638.247],
        [-73.97015, 40.74771, 1641.732],
        [-73.96981, 40.74781, 1645.927],
        [-73.96952, 40.74785, 1649.318],
        [-73.96918, 40.74785, 1653.229],
        [-73.96877, 40.74783, 1657.954],
        [-73.96811, 40.74766, 1665.973],
        [-73.96771, 40.74751, 1671.107],
        [-73.9672, 40.74722, 1678.442],
        [-73.95973, 40.74247, 1790.627],
        [-73.95923, 40.74218, 1797.871],
        [-73.95866, 40.74199, 1805.035]
    ],
    [
        [-73.99, 40.71508, 152],
        [-73.99016, 40.71477, 164.783],
        [-73.99023, 40.71459, 171.990],
        [-73.99024, 40.7144, 179.293],
        [-73.9902, 40.71405, 189.973],
        [-73.99267, 40.71385, 262.370],
        [-73.99275, 40.71384, 264.733],
        [-73.99256, 40.71245, 293.455],
        [-73.99238, 40.71131, 317.054],
        [-73.9923, 40.71105, 322.541],
        [-73.99224, 40.71097, 324.432],
        [-73.99219, 40.71088, 326.440],
        [-73.99197, 40.70991, 360.563],
        [-73.99195, 40.7098, 364.413],
        [-73.99333, 40.70959, 378.923],
        [-73.99416, 40.70949, 387.586],
        [-73.99554, 40.70927, 402.123],
        [-73.99717, 40.70905, 419.191],
        [-73.99792, 40.70893, 427.093],
        [-73.99838, 40.70881, 432.108],
        [-73.99865, 40.70872, 435.148],
        [-73.999, 40.70855, 439.433],
        [-73.99995, 40.70797, 452.008],
        [-74.00101, 40.70743, 465.174],
        [-74.00361, 40.70595, 498.693],
        [-74.00386, 40.70579, 502.066],
        [-74.00455, 40.7064, 530.640],
        [-74.005, 40.70685, 550.72],
        [-74.00676, 40.70562, 595.505],
        [-74.00682, 40.70558, 597]
    ],
    [
        [-74.01318, 40.70239, 1287],
        [-74.01288, 40.70241, 1303.666],
        [-74.01283, 40.70244, 1307.194],
        [-74.01273, 40.70248, 1308.537],
        [-74.01221, 40.70273, 1315.849],
        [-74.01198, 40.70283, 1318.496],
        [-74.0115, 40.70295, 1323.542],
        [-74.01115, 40.70179, 1341.814],
        [-74.01185, 40.70163, 1349.661],
        [-74.01201, 40.7016, 1351.430],
        [-74.01216, 40.70155, 1352.822],
        [-74.01224, 40.70149, 1353.778],
        [-74.01225, 40.70142, 1354.567],
        [-74.0122, 40.70134, 1355.559],
        [-74.0121, 40.70133, 1356.415],
        [-74.01036, 40.70173, 1371.859],
        [-74.00977, 40.70194, 1377.395],
        [-74.00944, 40.70207, 1378.977],
        [-74.00915, 40.70222, 1380.470],
        [-74.0068, 40.70365, 1393.286],
        [-74.00328, 40.70591, 1412.903],
        [-74.00273, 40.70624, 1415.886],
        [-74.00238, 40.70645, 1417.785],
        [-74.00193, 40.70665, 1422.571],
        [-74.00034, 40.70744, 1440.015],
        [-74.00014, 40.70758, 1442.513],
        [-74.00007, 40.70768, 1443.883],
        [-74.00001, 40.70783, 1445.780],
        [-74, 40.70793, 1446.994],
        [-74.00003, 40.70809, 1448.950],
        [-74.00023, 40.70837, 1452.804],
        [-74.00047, 40.70859, 1456.260],
        [-74.00147, 40.70938, 1469.512],
        [-74.00159, 40.70946, 1470.978],
        [-74.00165, 40.70949, 1471.638],
        [-74.00154, 40.7096, 1474.972],
        [-74.0006, 40.71088, 1510.365],
        [-74.00045, 40.71103, 1514.912],
        [-73.99829, 40.71318, 1568.932],
        [-73.99822, 40.71325, 1570.688],
        [-73.99852, 40.71344, 1579.178],
        [-73.99868, 40.71351, 1583.190],
        [-73.99943, 40.71387, 1591.466],
        [-73.99955, 40.71393, 1592.806],
        [-73.99965, 40.71516, 1620.065],
        [-73.99932, 40.71591, 1637.554],
        [-73.99858, 40.71711, 1666.854],
        [-73.99873, 40.71716, 1669.449],
        [-73.99891, 40.71727, 1673.110],
        [-73.99931, 40.71754, 1681.592],
        [-73.99995, 40.71801, 1695.703],
        [-73.99852, 40.71978, 1731.824],
        [-73.99765, 40.72083, 1753.403],
        [-73.9971, 40.7222, 1799.212],
        [-73.99712, 40.7223, 1802.447]
    ],
    [
        [-74.0153, 40.70985, 120],
        [-74.01512, 40.70983, 125.837],
        [-74.01503, 40.70983, 128.725],
        [-74.01533, 40.70893, 146.200],
        [-74.01577, 40.70774, 169.465],
        [-74.01601, 40.70715, 181.088],
        [-74.01623, 40.70662, 191.547],
        [-74.01626, 40.70628, 196.495],
        [-74.01632, 40.70601, 200.470],
        [-74.01667, 40.7051, 214.233],
        [-74.01673, 40.70478, 217.661],
        [-74.01672, 40.70462, 219.359],
        [-74.01666, 40.70434, 222.367],
        [-74.01656, 40.70404, 225.649],
        [-74.01558, 40.70203, 248.374],
        [-74.01548, 40.70187, 250.251],
        [-74.01531, 40.70168, 252.686],
        [-74.01503, 40.7015, 255.637],
        [-74.01473, 40.70137, 258.415],
        [-74.01438, 40.70126, 261.462],
        [-74.01405, 40.7012, 264.190],
        [-74.01381, 40.70117, 266.145],
        [-74.01347, 40.70118, 268.881],
        [-74.01293, 40.70124, 273.269],
        [-74.01254, 40.70131, 276.491],
        [-74.00985, 40.70192, 299.064],
        [-74.00977, 40.70194, 299.741],
        [-74.00944, 40.70207, 302.324],
        [-74.00915, 40.70222, 304.762],
        [-74.00832, 40.70273, 312.182],
        [-74.0068, 40.70365, 325.690],
        [-74.00328, 40.70591, 357.723],
        [-74.00155, 40.70694, 373.000],
        [-74.00097, 40.70725, 377.928],
        [-73.99986, 40.7078, 387.137],
        [-73.99887, 40.70837, 395.770],
        [-73.9984, 40.70858, 399.558],
        [-73.99798, 40.70873, 402.782],
        [-73.99764, 40.70882, 405.283],
        [-73.99728, 40.70889, 407.864],
        [-73.99449, 40.70927, 427.548],
        [-73.99329, 40.7094, 435.966],
        [-73.98939, 40.70997, 463.546],
        [-73.98524, 40.71045, 492.697],
        [-73.98352, 40.7106, 504.720],
        [-73.98052, 40.71082, 525.649],
        [-73.98014, 40.71086, 528.313],
        [-73.97976, 40.71095, 531.077],
        [-73.97931, 40.71108, 534.421],
        [-73.9787, 40.71137, 539.421],
        [-73.97852, 40.7115, 541.148],
        [-73.97821, 40.71174, 544.225],
        [-73.9779, 40.71208, 548.011],
        [-73.97772, 40.71231, 550.460],
        [-73.97614, 40.71531, 580.052],
        [-73.97553, 40.71658, 592.433],
        [-73.9752, 40.71736, 599.936],
        [-73.97503, 40.71801, 606.007],
        [-73.97496, 40.71834, 609.069],
        [-73.97485, 40.71905, 615.617],
        [-73.97458, 40.72127, 636.040],
        [-73.97444, 40.72204, 643.161],
        [-73.97433, 40.72236, 646.190],
        [-73.97408, 40.72284, 650.917],
        [-73.97242, 40.7255, 677.873],
        [-73.97226, 40.72579, 680.752],
        [-73.97211, 40.7261, 683.777],
        [-73.97198, 40.72641, 686.757],
        [-73.97187, 40.7268, 690.410],
        [-73.9717, 40.72796, 701.102],
        [-73.97166, 40.72829, 704.138],
        [-73.97166, 40.72863, 707.252],
        [-73.9717, 40.72893, 710.015],
        [-73.97178, 40.72916, 712.194],
        [-73.9719, 40.72942, 714.717],
        [-73.97206, 40.72969, 717.428],
        [-73.97228, 40.72994, 720.181],
        [-73.9725, 40.73015, 722.637],
        [-73.97324, 40.73077, 730.295],
        [-73.97341, 40.73095, 732.323],
        [-73.97368, 40.73131, 736.116],
        [-73.97387, 40.7317, 739.925],
        [-73.97478, 40.73518, 772.424],
        [-73.97487, 40.73554, 775.780],
        [-73.97491, 40.73586, 778.725],
        [-73.97489, 40.73625, 782.300],
        [-73.97478, 40.73664, 785.954],
        [-73.97454, 40.73713, 790.741],
        [-73.97436, 40.73741, 793.595],
        [-73.97391, 40.73784, 798.830],
        [-73.97323, 40.73876, 819.140],
        [-73.97309, 40.73897, 823.671],
        [-73.97292, 40.73938, 831.949],
        [-73.9727, 40.74004, 845.061],
        [-73.97256, 40.74073, 858.507],
        [-73.97239, 40.74144, 872.406],
        [-73.97244, 40.74191, 881.488],
        [-73.97238, 40.74236, 890.200],
        [-73.97224, 40.74276, 898.171],
        [-73.97207, 40.74318, 906.632],
        [-73.972, 40.7433, 909.159],
        [-73.97164, 40.74385, 920.984],
        [-73.97289, 40.7444, 968.600],
        [-73.97301, 40.74446, 973.336],
        [-73.97226, 40.74548, 996.807],
        [-73.97211, 40.74567, 1001.257],
        [-73.97291, 40.74601, 1022.246],
        [-73.97364, 40.74632, 1041.394],
        [-73.97374, 40.74616, 1043.648],
        [-73.97375, 40.74601, 1045.561],
        [-73.97374, 40.74595, 1046.331],
        [-73.97355, 40.74578, 1049.168],
        [-73.97346, 40.74573, 1050.245],
        [-73.97326, 40.74565, 1052.427],
        [-73.97307, 40.74562, 1054.299],
        [-73.97293, 40.74561, 1055.656],
        [-73.97274, 40.74562, 1057.494],
        [-73.9726, 40.74562, 1058.844],
        [-73.97245, 40.74566, 1062.335],
        [-73.97219, 40.74571, 1064.806],
        [-73.9719, 40.74589, 1068.259],
        [-73.97169, 40.74607, 1071.180],
        [-73.97097, 40.74702, 1084.500],
        [-73.97073, 40.7473, 1088.559],
        [-73.97039, 40.74757, 1093.097],
        [-73.97015, 40.74771, 1095.887],
        [-73.96981, 40.74781, 1099.246],
        [-73.96952, 40.74785, 1101.962],
        [-73.96918, 40.74785, 1105.094],
        [-73.96877, 40.74783, 1108.878],
        [-73.96811, 40.74766, 1115.300],
        [-73.96771, 40.74751, 1119.411],
        [-73.9672, 40.74722, 1125.285],
        [-73.95973, 40.74247, 1215.124],
        [-73.95923, 40.74218, 1220.925],
        [-73.95866, 40.74199, 1226.661],
        [-73.95663, 40.74159, 1245.985],
        [-73.95544, 40.74139, 1257.214],
        [-73.95493, 40.74135, 1261.937],
        [-73.95406, 40.74142, 1269.997],
        [-73.95241, 40.74125, 1280.546],
        [-73.95214, 40.74126, 1282.258],
        [-73.95168, 40.74134, 1285.248],
        [-73.95046, 40.74157, 1293.212],
        [-73.95009, 40.7416, 1295.569],
        [-73.94963, 40.74159, 1298.485],
        [-73.9494, 40.74156, 1299.963],
        [-73.94748, 40.7412, 1312.493],
        [-73.94522, 40.74074, 1327.317],
        [-73.9448, 40.74063, 1330.132],
        [-73.94437, 40.74048, 1333.131],
        [-73.9439, 40.74031, 1336.430],
        [-73.94008, 40.7387, 1364.121],
        [-73.93953, 40.73848, 1368.061],
        [-73.93903, 40.73831, 1371.533],
        [-73.93858, 40.73818, 1374.584],
        [-73.93753, 40.73795, 1381.508],
        [-73.93691, 40.73785, 1385.524],
        [-73.93595, 40.73774, 1391.675],
        [-73.93536, 40.73765, 1395.488],
        [-73.93388, 40.73735, 1405.194],
        [-73.9298, 40.73666, 1431.677],
        [-73.92603, 40.73592, 1456.349],
        [-73.92552, 40.7358, 1459.732],
        [-73.925, 40.73564, 1463.288],
        [-73.92454, 40.73548, 1466.495],
        [-73.92401, 40.73527, 1470.284],
        [-73.92346, 40.73501, 1474.391],
        [-73.92312, 40.73483, 1477.018],
        [-73.92282, 40.73464, 1479.496],
        [-73.92247, 40.7344, 1482.486],
        [-73.92038, 40.73278, 1501.428],
        [-73.91998, 40.73249, 1504.935],
        [-73.91953, 40.73221, 1508.624],
        [-73.91904, 40.73194, 1512.463],
        [-73.91856, 40.73172, 1516.017],
        [-73.91804, 40.73154, 1519.639],
        [-73.91409, 40.73044, 1546.301],
        [-73.91176, 40.72985, 1561.866],
        [-73.91123, 40.72968, 1565.513],
        [-73.91074, 40.72948, 1569.039],
        [-73.91026, 40.72926, 1572.593],
        [-73.90981, 40.729, 1576.179],
        [-73.90736, 40.72748, 1596.241],
        [-73.90701, 40.72728, 1599.018],
        [-73.90641, 40.72696, 1603.667],
        [-73.90586, 40.72671, 1607.730],
        [-73.90531, 40.72649, 1611.671],
        [-73.90471, 40.72631, 1615.760],
        [-73.90412, 40.72616, 1619.703],
        [-73.90351, 40.72606, 1623.657],
        [-73.90171, 40.72587, 1635.173],
        [-73.90135, 40.72581, 1637.508],
        [-73.90025, 40.72572, 1644.519],
        [-73.89458, 40.72521, 1680.697],
        [-73.89396, 40.72519, 1684.630],
        [-73.89352, 40.72521, 1687.423],
        [-73.89294, 40.72526, 1691.121],
        [-73.89238, 40.72534, 1694.732],
        [-73.89182, 40.72546, 1698.420],
        [-73.89122, 40.72562, 1702.450],
        [-73.89068, 40.72581, 1706.222],
        [-73.89023, 40.72601, 1709.528],
        [-73.88976, 40.72625, 1713.119],
        [-73.88781, 40.72739, 1728.723],
        [-73.88736, 40.72762, 1732.162],
        [-73.88704, 40.72776, 1734.504],
        [-73.88644, 40.72797, 1738.691],
        [-73.8858, 40.72814, 1742.988],
        [-73.88532, 40.72824, 1746.142],
        [-73.88452, 40.72834, 1751.279],
        [-73.88176, 40.72855, 1768.855],
        [-73.88118, 40.7286, 1772.553],
        [-73.88063, 40.72869, 1776.118],
        [-73.88005, 40.72882, 1779.951],
        [-73.87951, 40.72898, 1783.624],
        [-73.87898, 40.72918, 1787.376],
        [-73.87723, 40.72989, 1799.953],
        [-73.87675, 40.73007, 1803.346]
    ],
    [
        [-74.01635, 40.71683, 947],
        [-74.01642, 40.71664, 956.174],
        [-74.01646, 40.71632, 971.123],
        [-74.01584, 40.71604, 999.400],
        [-74.01538, 40.71582, 1020.712],
        [-74.01549, 40.71568, 1026.813],
        [-74.01559, 40.71554, 1032.773],
        [-74.01464, 40.7154, 1079.526],
        [-74.01449, 40.71542, 1086.883],
        [-74.01369, 40.71529, 1126.408],
        [-74.01355, 40.71527, 1133.290],
        [-74.01372, 40.71448, 1146.032],
        [-74.01422, 40.71287, 1172.361],
        [-74.01456, 40.71151, 1194.396],
        [-74.01464, 40.71113, 1200.522],
        [-74.01503, 40.70983, 1221.744],
        [-74.0151, 40.70923, 1230.098],
        [-74.01514, 40.70901, 1233.178],
        [-74.01558, 40.70788, 1249.518],
        [-74.01562, 40.70775, 1251.369],
        [-74.01563, 40.70762, 1253.175],
        [-74.01561, 40.70749, 1254.990],
        [-74.01556, 40.70737, 1256.735],
        [-74.01546, 40.70726, 1258.588],
        [-74.01517, 40.70707, 1262.618],
        [-74.01506, 40.70699, 1264.220],
        [-74.01498, 40.70688, 1265.962],
        [-74.0149, 40.70672, 1268.335],
        [-74.01486, 40.7065, 1271.415],
        [-74.01489, 40.70633, 1273.794],
        [-74.01502, 40.7059, 1279.912],
        [-74.01511, 40.70573, 1282.453],
        [-74.01524, 40.70535, 1287.897],
        [-74.01526, 40.70529, 1288.755],
        [-74.01555, 40.70451, 1295.224],
        [-74.01564, 40.704, 1299.330],
        [-74.01568, 40.7035, 1303.329],
        [-74.01566, 40.7026, 1310.513],
        [-74.01552, 40.70153, 1319.095],
        [-74.01547, 40.70125, 1321.351],
        [-74.0153, 40.70067, 1326.093],
        [-74.0117, 40.69087, 1407.290],
        [-74.01144, 40.69036, 1411.655],
        [-74.01114, 40.6899, 1415.751],
        [-74.00658, 40.68349, 1473.882],
        [-74.00636, 40.68312, 1477.122],
        [-74.006, 40.68224, 1484.476],
        [-74.00581, 40.68188, 1487.571],
        [-74.00575, 40.68178, 1488.448],
        [-74.00552, 40.68139, 1492.469],
        [-74.00516, 40.68103, 1501.211],
        [-74.00458, 40.6803, 1517.702],
        [-74.00446, 40.6801, 1521.953],
        [-74.00345, 40.679, 1534.192],
        [-74.00303, 40.67853, 1539.376],
        [-74.00288, 40.67823, 1542.845],
        [-74.00268, 40.67762, 1549.640],
        [-74.00262, 40.67746, 1551.438],
        [-74.00208, 40.67669, 1567.346],
        [-74.00157, 40.67606, 1580.831],
        [-74.00136, 40.67585, 1585.638],
        [-74.00067, 40.67484, 1606.387],
        [-74.00015, 40.67469, 1625.150],
        [-73.99966, 40.67455, 1634.333],
        [-73.99807, 40.67411, 1664.017],
        [-73.99776, 40.67474, 1689.481],
        [-73.99663, 40.67413, 1706.571],
        [-73.99381, 40.67281, 1747.405],
        [-73.99337, 40.6726, 1753.811],
        [-73.99287, 40.67321, 1765.910],
        [-73.99236, 40.67381, 1777.935],
        [-73.99001, 40.67266, 1832.884]
    ],
    [
        [-74.00356, 40.7355, 507],
        [-74.00334, 40.73553, 509.11875],
        [-74.00352, 40.73617, 519.7125],
        [-74.00505, 40.73596, 534.580],
        [-74.00512, 40.73596, 535.25],
        [-74.00493, 40.7353, 543.075],
        [-74.00474, 40.73465, 550.7875],
        [-74.00716, 40.73429, 582.230],
        [-74.00849, 40.73409, 599.51875],
        [-74.0086, 40.73267, 613.546],
        [-74.00878, 40.73187, 621.550],
        [-74.0092, 40.7297, 643.180],
        [-74.00935, 40.72898, 650.36875],
        [-74.01055, 40.72911, 666.602],
        [-74.01076, 40.72913, 669.4375],
        [-74.011, 40.72702, 688.365],
        [-74.01128, 40.7252, 704.742],
        [-74.01171, 40.72299, 724.708],
        [-74.01227, 40.72033, 748.783],
        [-74.01263, 40.71879, 762.761],
        [-74.01355, 40.71527, 794.833],
        [-74.01372, 40.71448, 801.987],
        [-74.01422, 40.71287, 816.770],
        [-74.01456, 40.71151, 829.141],
        [-74.01464, 40.71113, 832.58125],
        [-74.01477, 40.71117, 835.036],
        [-74.0158, 40.71156, 855.181],
        [-74.0157, 40.7118, 866.104],
        [-74.01573, 40.71182, 867.419],
        [-74.01576, 40.71187, 869.803],
        [-74.01576, 40.7119, 871.105],
        [-74.01571, 40.71195, 873.828],
        [-74.01564, 40.71196, 876.171],
        [-74.01557, 40.71194, 878.632],
        [-74.01554, 40.71189, 881.016],
        [-74.01554, 40.71186, 882.318],
        [-74.01559, 40.71181, 885.041],
        [-74.01562, 40.7118, 886.119],
        [-74.0157, 40.7118, 888.751],
        [-74.0158, 40.71156, 899.675],
        [-74.0145, 40.71106, 941.842],
        [-74.01443, 40.71103, 944.16875],
        [-74.01435, 40.71124, 945.500],
        [-74.01403, 40.71274, 954.757],
        [-74.01378, 40.71341, 959]
    ]
]

// var arr = [];
// map.addEventListener('click', function (e) {
//     arr.push([e.coordinate.x, e.coordinate.y]);
// })